<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
            metal:use-macro="here/main_template/macros/master"
      i18n:domain="bika">

<head>
    <!-- <style>
        /* Set default styles for tab content */
        .tabcontent {
          color: white;
          display: none;
          padding: 50px;
          text-align: center;
          height: 100%;
        }

    </style> -->

    <!-- <script type="text/javascript">
    function myFunction() {
      alert('Halo!')
    }
    myFunction();
    </script> -->
    <metal:block fill-slot="javascript_head_slot"
            tal:define="portal context/@@plone_portal_state/portal;">
        <script type="text/javascript"
                tal:attributes="src python:portal.absolute_url() + '/bika_widgets/datetimewidget.js'"></script>
        <script type="text/javascript"
                tal:attributes="src python:portal.absolute_url() + '/bika_widgets/referencewidget.js'"></script>
        <link rel="stylesheet" type="text/css" media="all" href=""
                tal:attributes="href string:${portal/absolute_url}/bika_widgets/referencewidget.css"/>
    </metal:block>
</head>

<body>
<metal:title fill-slot="content-title">
    <div>
        <h1>
          <img tal:attributes="src string:${view/portal_url}/++resource++baobab.lims.images/shipment_big.png">
          <span>Edit Collection Request </span>
        </h1>
    </div>
</metal:title>
<div metal:fill-slot="content-core"
     tal:define="
        portal context/@@plone_portal_state/portal;
        plone_view context/@@plone;
        portal_state context/@@plone_portal_state;">

    <div id="baobab_collection_request_edit">

        <div id="content">
            <ul class="formTabs">
                <li class="formTab firstFormTab">
                    <button id="fieldsetlegend-client-information" type="button" style="background-color: #ffffff; padding: 6px; border-radius: 7pt 7pt 0pt 0pt;"><span>Client Information</span></button>
                </li>
                <li class="formTab" class="selected">
                    <button id="fieldsetlegend-sample-requests" type="button" style="background-color: #ccc; padding: 6px; border-radius: 7pt 7pt 0pt 0pt;">Sample Requests</button>
                </li>
                <li class="formTab lastFormTab">
                    <button id="fieldsetlegend-evaluation" type="button" style="background-color: #ccc; padding: 6px; border-radius: 7pt 7pt 0pt 0pt;">Evaluation</button>
                </li>
            </ul>

        <form id="centrifugation_edit_form" name="centrifugation_edit_info_form" method="POST">
            <input type="hidden" name="submitted" value="1"/>
            <span tal:replace="structure context/@@authenticator/authenticator"/>


            <fieldset id="fieldset-client-information" class="tabcontent" style="display: block">
                <!--?<legend id="fieldsetlegend-default">Default-->
                <!--?</legend>-->
                <table summary="Client Information" class="listing add nosort" cellpadding="0" cellspacing="0" style="width: 100%">
                    <thead>

                <tal:field tal:repeat="field python:view.get_fields_with_visibility('visible', 'Client Information')">
                    <tal:def tal:define="
                        fieldName python:field.getName();
                        field_macro here/widgets/field/macros/edit;
                        accessor python:field.getAccessor(context);
                        widget python:field.widget;
                        errors python:{};
                        mode string:edit;">
                        <tr tal:attributes="fieldName fieldName">
                            <tal:columns tal:condition="python: fieldName != 'Remarks'" tal:repeat="arnum python:range(1)">
                                <td class="nowrap" tal:attributes="arnum arnum">
                                    <div class="field">
                                        <tal:ifLabel tal:condition="widget/render_own_label | nothing">
                                            <label class="formQuestion"
                                                   tal:attributes="for python:fieldName">
                                                <span tal:replace="python:widget.Label(here)"
                                                      i18n:translate="" />
                                                <span class="required"
                                                      tal:condition="field/required"
                                                      title="Required"
                                                      i18n:attributes="title title_required;">&nbsp;</span>
                                                <span class="formHelp"
                                                     tal:define="description python:widget.Description(here)"
                                                     tal:content="structure description"
                                                     tal:attributes="id string:${fieldName}_help"
                                                     i18n:translate="">
                                                  Help
                                                </span>
                                            </label>
                                        </tal:ifLabel>
                                        <metal:field
                                                use-macro="python:context.widget(fieldName, mode='edit')" />
                                    </div>

                                </td>
                            </tal:columns>
                        </tr>
                    </tal:def>
                </tal:field>
                </thead>
                </table>
            </fieldset>

            <fieldset id="fieldset-sample-requests" class="tabcontent" style="display: block">
                <!--?<legend id="fieldsetlegend-default">Default-->
                <!--?</legend>-->
                <div>
                    <table summary="Human Sample Requests" class="listing add nosort" cellpadding="0" cellspacing="0" style="width: 100%">
                        <thead>
                            <tr>
                              <th style='text-align:left;' i18n:translate=''>Approved</th>
                              <th style='text-align:left;' i18n:translate=''>Barcode</th>
                              <th style='text-align:left;' i18n:translate=''>Sample Type</th>
                              <th style='text-align:left;' i18n:translate=''>Sample Package</th>
                              <th style='text-align:left;' i18n:translate=''>Volume</th>
                              <th style='text-align:left;' i18n:translate=''>Unit</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr tal:attributes='id python:human_sample_request["UID"]' class='human-collectionrequest-rows' tal:repeat="human_sample_request python:view.prepare_human_sample_request_rows()">
                                <!--?<td  style='text-align:left;' tal:content='python:human_sample_request["approved"]'>approved</td>-->
                                <td style='text-align:left;' >
                                    <select tal:condition='python:human_sample_request["status_approved"]' class="human-request-approval" tal:attributes='datauid python:human_sample_request["UID"]'>
                                        <option value=""></option>
                                        <option value="rejected">Rejected</option>
                                        <option value="approved" selected>Approved</option>
                                    </select>

                                    <select tal:condition='python:human_sample_request["status_rejected"]' class="human-request-approval" tal:attributes='datauid python:human_sample_request["UID"]'>
                                        <option value=""></option>
                                        <option value="rejected" selected>Rejected</option>
                                        <option value="approved">Approved</option>
                                    </select>

                                    <select tal:condition='python:human_sample_request["status_unspecified"]' class="human-request-approval" tal:attributes='datauid python:human_sample_request["UID"]'>
                                        <option value="" selected></option>
                                        <option value="rejected">Rejected</option>
                                        <option value="approved">Approved</option>
                                    </select>
                                </td>
                                <td  style='text-align:left;' tal:content='python:human_sample_request["barcode"]'>barcode</td>
                                <td  style='text-align:left;' tal:content='python:human_sample_request["sample_type"]'>sample_type</td>
                                <td  style='text-align:left;' tal:content='python:human_sample_request["sample_package"]'>sample_type</td>
                                <td  style='text-align:left;' tal:content='python:human_sample_request["volume"]'>volume</td>
                                <td  style='text-align:left;' tal:content='python:human_sample_request["unit"]'>unit</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div>
                    <table summary="Microbe Sample Requests" class="listing add nosort" cellpadding="0" cellspacing="0" style="width: 100%">
                        <thead>
                            <tr>
                              <th style='text-align:left;' i18n:translate=''>Approved</th>
                              <th style='text-align:left;' i18n:translate=''>Identification</th>
                              <th style='text-align:left;' i18n:translate=''>Strain</th>
                              <th style='text-align:left;' i18n:translate=''>Origin</th>
                              <th style='text-align:left;' i18n:translate=''>Sample Type</th>
                              <th style='text-align:left;' i18n:translate=''>Phenotype</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr tal:attributes='id python:microbe_sample_request["UID"]' class='microbe-collectionrequest-rows' tal:repeat="microbe_sample_request python:view.prepare_microbe_sample_request_rows()">
                                <!--?<td  style='text-align:left;' tal:content='python:microbe_sample_request["approved"]'>approved</td>-->
                                <td style='text-align:left;' >

                                    <select tal:condition='python:microbe_sample_request["status_approved"]' class="microbe-request-approval" tal:attributes='datauid python:microbe_sample_request["UID"]'>
                                        <option value=""></option>
                                        <option value="rejected">Rejected</option>
                                        <option value="approved" selected>Approved</option>
                                    </select>

                                    <select tal:condition='python:microbe_sample_request["status_rejected"]' class="microbe-request-approval" tal:attributes='datauid python:microbe_sample_request["UID"]'>
                                        <option value=""></option>
                                        <option value="rejected" selected>Rejected</option>
                                        <option value="approved">Approved</option>
                                    </select>

                                    <select tal:condition='python:microbe_sample_request["status_unspecified"]' class="microbe-request-approval" tal:attributes='datauid python:microbe_sample_request["UID"]'>
                                        <option value="" selected></option>
                                        <option value="rejected">Rejected</option>
                                        <option value="approved">Approved</option>
                                    </select>

                                </td>
                                <td  style='text-align:left;' tal:content='python:microbe_sample_request["identification"]'>identification</td>
                                <td  style='text-align:left;' tal:content='python:microbe_sample_request["strain"]'>strain</td>
                                <td  style='text-align:left;' tal:content='python:microbe_sample_request["origin"]'>origin</td>
                                <td  style='text-align:left;' tal:content='python:microbe_sample_request["sample_type"]'>sample_type</td>
                                <td  style='text-align:left;' tal:content='python:microbe_sample_request["phenotype"]'>phenotype</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </fieldset>

            <fieldset id="fieldset-evaluation" class="tabcontent" style="display: block">
                <!--?<legend id="fieldsetlegend-default">Default-->
                <!--?</legend>-->
                <table summary="Evaluation" class="listing add nosort" cellpadding="0" cellspacing="0" style="width: 100%">
                    <thead>

                <tal:field tal:repeat="field python:view.get_fields_with_visibility('visible', 'Evaluation')">
                    <tal:def tal:define="
                        fieldName python:field.getName();
                        field_macro here/widgets/field/macros/edit;
                        accessor python:field.getAccessor(context);
                        widget python:field.widget;
                        errors python:{};
                        mode string:edit;">
                        <tr tal:attributes="fieldName fieldName">
                            <tal:columns tal:condition="python: fieldName != 'Remarks'" tal:repeat="arnum python:range(1)">
                                <td class="nowrap" tal:attributes="arnum arnum">
                                    <div class="field">
                                        <tal:ifLabel tal:condition="widget/render_own_label | nothing">
                                            <label class="formQuestion"
                                                   tal:attributes="for python:fieldName">
                                                <span tal:replace="python:widget.Label(here)"
                                                      i18n:translate="" />
                                                <span class="required"
                                                      tal:condition="field/required"
                                                      title="Required"
                                                      i18n:attributes="title title_required;">&nbsp;</span>
                                                <span class="formHelp"
                                                     tal:define="description python:widget.Description(here)"
                                                     tal:content="structure description"
                                                     tal:attributes="id string:${fieldName}_help"
                                                     i18n:translate="">
                                                  Help
                                                </span>
                                            </label>
                                        </tal:ifLabel>
                                        <metal:field
                                                use-macro="python:context.widget(fieldName, mode='edit')" />
                                    </div>

                                </td>
                            </tal:columns>
                        </tr>
                    </tal:def>
                </tal:field>
                </thead>
                </table>
            </fieldset>
            <span>
                <div style="text-align:left;padding-bottom:10px;">
                <input i18n:attributes="value"
                        class="context button allowMultiSubmit"
                        type="submit"
                        name="save_button"
                        value="Save"/>
            </div>
            </span>

        </form>


    </div>
    </div>
    </div>

</body>
</html>