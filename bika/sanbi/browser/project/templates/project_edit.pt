<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
            metal:use-macro="here/main_template/macros/master"
      i18n:domain="bika">

<head>
    <metal:javascript_head_slot
            tal:define="portal context/@@plone_portal_state/portal;"
            fill-slot="javascript_head_slot">
        <script type="text/javascript" charset="utf-8"
                tal:define="navroot context/@@plone_portal_state/navigation_root_url"
                tal:attributes="href string:${navroot}/++resource++bika.sanbi.js/d3.v3.js"></script>
        <script type="text/javascript"
                tal:attributes="src python:portal.absolute_url() + '/bika_widgets/referencewidget.js'"></script>
        <script type="text/javascript" charset="utf-8">
              (function($) {
                  $(function() {
                      //$("#basic").pickList();
                  });
              })(jQuery);
          </script>
    </metal:javascript_head_slot>
    <metal:block
            tal:define="portal context/@@plone_portal_state/portal;"
            fill-slot="style_slot">
        <link rel="stylesheet" type="text/css"
            tal:define="navroot context/@@plone_portal_state/navigation_root_url"
            tal:attributes="href string:${navroot}/++resource++bika.sanbi.css/myfile.css"
            />
        <link rel="stylesheet" type="text/css" media="all" href=""
              tal:attributes="href string:${portal/absolute_url}/bika_widgets/referencewidget.css"/>
    </metal:block>
</head>

<body>

<metal:title fill-slot="content-title">
    <h1>
        <img tal:condition="view/icon | nothing" tal:attributes="src view/icon"/>
        <tal:new tal:condition="python: not context.Title()" i18n:translate="">Add Project</tal:new>
        <tal:new tal:condition="python:context.Title()" tal:content="python:'Edit ' + context.getId()"></tal:new>
    </h1>
</metal:title>

<metal:content-description fill-slot="content-description">
</metal:content-description>

<div metal:fill-slot="content-core"
     tal:define="
        portal context/@@plone_portal_state/portal;">

    <form method="post" id="project_registration_edit" name="project_form">
        <input type="hidden" name="submit" value="1" />
        <table class="header_table">
            <thead class="manage_project_fileds">
            <tal:field repeat="field python:view.get_fields_with_visibility('visible')">
                <tr tal:define="
                        fieldName python:field.getName();
                        fieldMacro here/widgets/field/macros/edit;
                        accessor python:field.getAccessor(context);
                        widget python:field.widget;
                        errors python:{};
                        mode string:edit;"
                    tal:condition="python: fieldName != 'Remarks'">

                    <td colspan="5">
                        <tal:x condition="python:mode!='structure'">
                            <metal:field
                                use-macro="python:context.widget(fieldName, mode=mode)"/>
                        </tal:x>
                    </td>
                </tr>
            </tal:field>
            </thead>
        </table>

        <span>
            <div style="text-align: left; padding-bottom: 10px;">
                <input i18n:attributes="value"
                    class="context button allowMultiSubmit"
                    type="submit"
                    name="submit"
                    value="Save"/>
            </div>
        </span>
    </form>

</div>

</body>
</html>
