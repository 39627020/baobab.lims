<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:tal="http://xml.zope.org/namespaces/tal"
	xmlns:metal="http://xml.zope.org/namespaces/metal"
	xmlns:i18n="http://xml.zope.org/namespaces/i18n"
	metal:use-macro="here/main_template/macros/master"
	i18n:domain="bika">

	<head>
        <metal:css fill-slot="style_slot">
            <tal:css>
                <style type="text/css"
                       media="all">
                    table{
                        border-collapse: collapse;
                    }
                    tr{
                        padding-top: .5em;
                        padding-bottom: .5em;
                    }
                    div.print_document{
                        display: inline-block;
                        margin-right: 20px;
                        margin-top: 5px;
                        float:right;
                    }
                </style>
            </tal:css>
        </metal:css>
    </head>

	<body>

		<metal:title fill-slot="content-title">
            <div style="display:inline-block;">
			<h1>
				<span class="documentFirstHeading" tal:content="view/id" />
			</h1>
            </div>
            <div class="print_document">
                <a tal:attributes="href python:context.absolute_url()+'/print';" i18n:translate="" class="print_button">Print</a>
            </div>
		</metal:title>

		<metal:core fill-slot="content-core"
            tal:define="
                    portal context/@@plone_portal_state/portal;
                    attachments python:view.getAttachments();
                    review_state python: context.portal_workflow.getInfoFor(context, 'review_state');
                    attachments_allowed here/bika_setup/getAttachmentsPermitted;
                    delete_attachments python:True;
                    update_attachments python:True;">

            <div tal:condition="attachments_allowed">
                <metal:block use-macro="here/kitattachments/macros/attachments"/>
            </div>

            <table class="invoice-header">
                <tbody>
                <tr>
                    <th i18n:translate="" style="padding-bottom: .5em;">Kit Template: </th>
                    <td tal:content="view/kittemplate_title" style="padding-bottom: .5em;"></td>
                </tr>
                <tr style="padding-top:.5em; padding-bottom: .5em;">
                    <th i18n:translate="">Kit Quantity: </th>
                    <td tal:content="view/quantity"></td>
                </tr>
                </tbody>
            </table>
            <table class="invoice-items items">
                <thead>
                <tr>
                    <th i18n:translate="">Product</th>
                    <th i18n:translate="">Quantity</th>
                    <th i18n:translate="">Price</th>
                    <th class="currency" i18n:translate="">Total</th>
                </tr>
                </thead>
                <tbody>
                <tal:items repeat="item view/items">
                    <tal:item>
                        <tr>
                            <td tal:content="item/title"></td>
                            <td class="number" tal:content="item/quantity"></td>
                            <td class="currency">
                                <span tal:content="item/price"></span>
                            </td>
                            <td class="currency">
                                <span tal:content="item/totalprice"></span>
                            </td>
                        </tr>
                    </tal:item>
                </tal:items>
                <tr class="totals">
                    <td colspan="3" i18n:translate="">Subtotal</td>
                    <td class="currency">
                        <span tal:content="python:view.getPreferredCurrencyAbreviation()">$</span>
                        <span tal:content="view/subtotal"></span>
                    </td>
                </tr>
                <tr class="totals">
                    <td colspan="3" i18n:translate="">VAT</td>
                    <td class="currency">
                        <span tal:content="python:view.getPreferredCurrencyAbreviation()">$</span>
                        <span tal:content="view/vat"></span>
                    </td>
                </tr>
                <tr class="totals">
                    <td colspan="3" i18n:translate="">Total</td>
                    <td class="currency">
                        <span tal:content="python:view.getPreferredCurrencyAbreviation()">$</span>
                        <span tal:content="view/total"></span>
                    </td>
                </tr>
                </tbody>
            </table>

		</metal:core>

	</body>

</html>
